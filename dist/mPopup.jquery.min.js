/*! mPopup - v1.0.7 - 2015-02-24
* https://github.com/mIRUmd/mPopup/
* Copyright (c) 2015 Balan Miroslav; */

!function(a){function b(a,b,c){b.closeOnOverlayClick&&c.on("click",function(b){b.preventDefault(),a.mPopup("close"),c.off("click")})}function c(a,b){a.on("click","."+b.closeClass,function(b){b.preventDefault(),a.mPopup("close"),a.off("click")})}function d(){var b=a(".mPopup:visible");if(b.length>0){var c=b.data("mPopup"),d=c;c.animationType=!1,c.overlayFade=!1,b.mPopup("close"),b.data("mPopup",d)}}var e=function(b,c){var d=b.data("mPopup"),e=d.modifyPosition,f=a(window),g=a(document),h={},i={};if(h.width=f.width(),h.height=f.height(),i.width=b.outerWidth(),i.height=b.outerHeight(),null==d.positionElement){var j=(h.height-i.height)/2,k=(h.width-i.width)/2;"absolute"==c&&(j=j>=20?j:20,j=g.scrollTop()+j)}else{var l="offset"==d.typePositionObject?d.positionElement.offset():d.positionElement.position();j=l.top,k=l.left}if("undefined"!=typeof e.top&&(j+=e.top),"undefined"!=typeof e.left&&(k+=e.left),k+i.width>h.width){var m=k+i.width-h.width;k=k-m-10,b.addClass("pos-changed")}b.css("top",j),b.css("left",k)},f={init:function(b){return this.each(function(){var c=a(this),d=c.data("mPopup");if(0!=c.length){if("undefined"==typeof d){var e={type:"fixed",closeClass:"mPopup-close",showOverlay:!0,closeOnOverlayClick:!0,overlayClass:"mPopup-overlay",overlayFade:!0,animationType:"fade",animationSpeed:400,positionElement:null,typePositionObject:"offset",modifyPosition:{top:0,left:0},onOpen:function(){},onClose:function(){}};d=a.extend({},e,b),c.data("mPopup",d)}else d=a.extend({},d,b);if(d.id){var f=a("[data-id="+d.id+"]");f.length>0?f.replaceWith(c):c.appendTo("body"),c.attr("data-id",d.id)}else c.appendTo("body");c.css("position","absolute"==d.type?"absolute":"fixed")}})},open:function(){d();var f=a(this),g=f.data("mPopup"),h=a("."+g.overlayClass);return 0==h.length&&(h=a("<div></div>",{"class":g.overlayClass}).appendTo("body")),0==f.length?(console.error("Cannot find element  !"),!1):(e(f,g.type),g.showOverlay&&(g.overlayFade?h.fadeIn("fast"):h.show()),"slide"==g.animationType?f.slideDown(g.animationSpeed):"fade"==g.animationType?f.fadeIn(g.animationSpeed):f.show(),g.onOpen&&g.onOpen(),b(f,g,h),c(f,g),void a(window).resize(function(){e(f,g.type)}))},close:function(){var b=a(this),c=b.data("mPopup"),d=a("."+c.overlayClass),e=function(){c.showOverlay&&(c.overlayFade?d.fadeOut("fast",function(){d.removeClass(c.overlayClass)}):d.hide().removeClass(c.overlayClass)),c.onClose&&c.onClose()};"slide"==c.animationType?b.slideUp(c.animationSpeed,e):"fade"==c.animationType?b.fadeOut(c.animationSpeed,e):(b.hide(),e()),a(window).off("resize")},"recalculate-position":function(){var b=a(this),c=b.data("mPopup");0!=b.length&&c&&e(b,c.type)},destroy:function(){var b=a(this);if(b.data("mPopup")){var c=b.data("mPopup"),d=a("."+c.overlayClass);d.remove(),a(window).off("resize"),b.css({position:"",top:"",left:""}),b.removeData("mPopup")}}};a.fn.mPopup=function(){var b=arguments[0];if(f[b])b=f[b],arguments=Array.prototype.slice.call(arguments,1);else{if("object"!=typeof b&&b)return a.error("Method "+b+" does not exist on jQuery.mPopup"),this;b=f.init}return b.apply(this,arguments)}}(jQuery);